# Supabase Storage Buckets

This document outlines the storage buckets used in the Supabase project.

## Buckets

### `invoices`
- **Description**: Stores generated PDF invoices for enrollments.
- **Public Access**: Configured for private access. Access is controlled via signed URLs generated by the `generate-invoice` edge function.
- **Policies**: Row-level security (RLS) policies should be implemented to ensure only authorized users can generate and access invoices.

### `avatars` (Optional)
- **Description**: Could be used to store user profile pictures.
- **Public Access**: Can be configured for public read access if profile pictures are meant to be publicly viewable, or private with RLS for restricted access.
- **Policies**: RLS policies should be implemented to allow users to upload their own avatars and potentially view others' avatars based on application logic.

### `documents` (Optional)
- **Description**: Could be used to store various user-uploaded documents (e.g., identity proofs, educational certificates).
- **Public Access**: Should be configured for private access. Access must be strictly controlled via RLS policies.
- **Policies**: RLS policies should ensure that users can only upload and view their own documents, and administrators or authorized personnel can access relevant documents.

## General Storage Security Considerations

- **Row-Level Security (RLS)**: Always enable and configure RLS policies for all storage buckets to control who can access, upload, and delete files.
- **Signed URLs**: For private buckets, use signed URLs with appropriate expiration times to grant temporary, controlled access to files.
- **File Size and Type Limits**: Implement limits on file sizes and allowed file types to prevent abuse and ensure efficient storage usage.
- **Backup Strategy**: Ensure a robust backup strategy is in place for all critical data stored in buckets.